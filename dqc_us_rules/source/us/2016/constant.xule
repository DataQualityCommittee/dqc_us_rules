/**

DQC Rules
 (c) Copyright 2017 - 2018, XBRL US Inc. All rights reserved.
 See https://xbrl.us/dqc-license for license information.
 See https://xbrl.us/dqc-patent for patent infringement notice.
Taxonomy: US GAAP 2016

**/

constant $Accrual_Items =
				navigate summation-item descendants from list(ComprehensiveIncomeNetOfTax,
				NetIncomeLoss, 
				NetIncomeLossAvailableToCommonStockholdersBasic,
				NetIncomeLossAvailableToCommonStockholdersDiluted,
				IncomeLossIncludingPortionAttributableToNoncontrollingInterest,
				IncomeLossAttributableToParent,
				NetIncomeLossAllocatedToGeneralPartners,
				NetIncomeLossAllocatedToLimitedPartners,
				StockholdersEquityPeriodIncreaseDecrease,
				PartnersCapitalAccountPeriodIncreaseDecrease)  taxonomy $us-gaap where $relationship.target.is-monetary == true returns set (target-name)
				+
				navigate parent-child descendants from list(IncomeStatementAbstract,
				StatementOfIncomeAndComprehensiveIncomeAbstract,
				StatementOfStockholdersEquityAbstract,
				StatementOfPartnersCapitalAbstract) taxonomy $us-gaap where $relationship.target.is-monetary == true returns set (target-name)

constant $cash_flow_exceptions = set(ProceedsFromDepositsWithOtherInstitutions, 
				InterestPaidCapitalized,
				ProceedsFromFederalHomeLoanBankAdvances,
				PaymentsForFederalHomeLoanBankAdvances,
				ProceedsFromPaymentsForTradingSecurities,
				PaymentsForDepositsWithOtherInstitutions,
				ProceedsFromPaymentsForInSecuritiesSoldUnderAgreementsToRepurchase,
				IncreaseDecreaseInFederalFundsPurchasedAndSecuritiesSoldUnderAgreementsToRepurchaseNet,
				IncreaseDecreaseInRestrictedCash, IncreaseDecreaseOfRestrictedInvestments
				)

constant $base_qname = sum(filter $all_base_taxonomies.concepts returns $item.name)

constant $filing_qname = filter taxonomy().concepts returns $item.name

constant $extension_qname = $filing_qname - $base_qname

constant $extension_ns = first($extension_qname).namespace-uri


constant $tax_items = set(IncomeTaxExpenseBenefit,
				CurrentIncomeTaxExpenseBenefit,
				CurrentForeignTaxExpenseBenefit,
				CurrentFederalStateAndLocalTaxExpenseBenefit,
				CurrentFederalTaxExpenseBenefit,
				CurrentStateAndLocalTaxExpenseBenefit,
				DeferredIncomeTaxExpenseBenefit,
				DeferredForeignIncomeTaxExpenseBenefit,
				DeferredFederalStateAndLocalTaxExpenseBenefit,
				DeferredFederalIncomeTaxExpenseBenefit,
				DeferredStateAndLocalIncomeTaxExpenseBenefit,
				OtherTaxExpenseBenefit
				)


constant $calcRelationships = set(for ($rel in navigate summation-item descendants taxonomy $us-gaap returns (relationship))
										set($rel.source.name.namespace-uri + ':' + $rel.source.name.local-name + ':' + $rel.target.name.namespace-uri + ':' + $rel.target.name.local-name,$rel.weight))
										
/** Constants Used for Nonneg Rules
**
										 **/
constant $exclude_non_neg_string_members = set(
				'adjust',
				'consolidat',
				'eliminat',
				'netting',
				'reconcili',
				'reclass'
				)
				
				
/** Catch all concepts 
	This constant defines strings that when contained in an element mean that a child of that parent element can be promoted to a sibling or a 	sibling of the parent element can be demoted to a child	of that element.	
				**/
				
constant $elements_excluded_from_rule = set(
				OperatingIncomeLoss,
				InterestIncomeOperating,
				OperatingCostsAndExpenses,
				NontradeReceivablesCurrent,
				OtherOperatingIncomeExpenseNet,
				GainLossOnSaleOfStockInSubsidiaryOrEquityMethodInvestee
				)
/* The second list is an exception to the rule 
For example any children of GeneralAndAdministrativeExpense can be promoted to be a sibling except OtherGeneralAndAdministrativeExpense	
				**/ 
constant $parent_elements_with_children_promotable_to_sibling = set(
				list(AccountsPayableAndAccruedLiabilitiesCurrent, list(AccountsPayableCurrent, AccruedLiabilitiesCurrent, AccountsPayableOtherCurrent, OtherAccruedLiabilitiesCurrent)),
				list(AccountsPayableAndAccruedLiabilitiesCurrentAndNoncurrent, list(AccountsPayableCurrentAndNoncurrent, AccruedLiabilitiesCurrentAndNoncurrent)),
				list(AccountsPayableAndAccruedLiabilitiesNoncurrent, list(OtherAccruedLiabilitiesNoncurrent)),
				list(AccountsPayableCurrent, list(AccountsPayableOtherCurrent)),
				list(AccruedLiabilitiesCurrent, list(OtherAccruedLiabilitiesCurrent)),
				list(AccruedLiabilitiesCurrentAndNoncurrent, list(OtherAccruedLiabilitiesCurrentAndNoncurrent)),
				list(feesandcommissions,list(FeesAndCommissionsOther)),
				list(GeneralAndAdministrativeExpense, list(OtherGeneralAndAdministrativeExpense)),
				list(IncreaseDecreaseInAccountsPayableAndAccruedLiabilities, list(IncreaseDecreaseInAccountsPayable, IncreaseDecreaseInAccruedLiabilities, IncreaseDecreaseInOtherAccruedLiabilities)),
				list(IncreaseDecreaseInAccruedLiabilities, list(IncreaseDecreaseInOtherAccruedLiabilities)),
				list(SellingGeneralAndAdministrativeExpense, list(OtherSellingAndMarketingExpense))
				)
				
constant $sibling_elements_with_siblings_demotable_to_descendant = set(
				list(CashProvidedByUsedInInvestingActivitiesDiscontinuedOperations, list(NetCashProvidedByUsedInInvestingActivitiesContinuingOperations,CashProvidedByUsedInOperatingActivitiesDiscontinuedOperations, CashProvidedByUsedInFinancingActivitiesDiscontinuedOperations)),
				list(GainLossOnInvestments,list()),
				list(GeneralAndAdministrativeExpense,list()),
				list(InterestExpense,list(Revenues, InvestmentIncomeInterest)), /** Included as part of revenue calc and excluded as well in calc of RevenuesNetOfInterestExpense = Revenues - 	InterestExpense **/
				list(Investments, list()),
				list(NoninterestExpense, list()),
				list(NonoperatingGainsLosses,list()), /** The definition includes interest but there are sibling interest elements in the taxonomy **/
				list(NonoperatingIncomeExpense, list(OperatingIncomeLoss)),
				list(OtherCostAndExpenseOperating, list()),
				list(OtherExpenses, list()),
				list(OtherGeneralExpense, list(SellingGeneralAndAdministrativeExpense)),
				list(OtherLaborRelatedExpenses, list()),
				list(OtherNoncashIncomeExpense, list()),
				list(OtherNonoperatingIncomeExpense, list()),
				list(OtherRestrictedAssets, list()),
				list(RegulatedEntityOtherAssetsNoncurrent, list()),
				list(SellingGeneralAndAdministrativeExpense,list())
				)
				
constant $child_elements_promotable_to_sibling_of_parent_element = set(
				EmployeeRelatedLiabilitiesCurrentAndNoncurrent,
				IncreaseDecreaseInEmployeeRelatedLiabilities,
				AllocatedShareBasedCompensationExpense
				)

constant $siblings_demotable_to_child = set(
				list(AccountsNotesAndLoansReceivableNetCurrent, DueFromJointVenturesCurrent),
				list(AssetsCurrent, CustomerFunds),
				list(AssetsCurrent, DeferredSalesCommission),
				list(AssetsCurrent, EstimatedInsuranceRecoveries),
				list(AssetsNoncurrent, DeferredOfferingCosts),
				list(CostOfGoodsSold, CostOfPurchasedPower),
				list(CostOfGoodsSold, FoodAndBeverageCostOfSales),
				list(CostOfRevenue, AmortizationOfMortgageServicingRightsMSRs),
				list(CostOfRevenue, BusinessDevelopment),
				list(FinancialServicesRevenue, GainLossOnSalesOfLoansNet),
				list(GainLossOnInvestments, ForeignCurrencyTransactionGainLossUnrealized),
				list(GainLossOnInvestments, GainLossOnDerivativeInstrumentsNetPretax),
				list(GainLossOnInvestments, GainLossOnSaleOfDerivatives),
				list(GainLossOnInvestments, UnrealizedGainLossOnDerivativesAndCommodityContracts),
				list(GrantsReceivableNoncurrent, LongTermInvestmentsAndReceivablesNet),
				list(Investments, DerivativeAssets),
				list(Investments, FederalHomeLoanBankStock),
				list(Investments, FederalReserveBankStock),
				list(Investments, RealEstateInvestments),
				list(LaborAndRelatedExpense, SalariesAndWages),
				list(LiabilitiesCurrent, DeferredGainOnSaleOfProperty),
				list(LongTermInvestmentsAndReceivablesNet, RestrictedCashAndInvestmentsNoncurrent),
				list(MarketableSecurities, AvailableForSaleSecuritiesDebtSecurities),
				list(MarketableSecurities, DerivativeAssets),
				list(MarketableSecurities, HeldToMaturitySecurities),
				list(MarketableSecurities, SecuritiesBorrowed),
				list(MarketableSecurities, TradingSecurities),
				list(NoninterestExpense, EquitySecuritiesFvNiRealizedGainLoss),
				list(NoninterestExpense, FloorBrokerageExchangeAndClearanceFees),
				list(NoninterestExpense, GainLossOnSaleOfPropertyPlantEquipment),
				list(NoninterestExpense, GainsLossesOnSalesOfAssets),
				list(NonoperatingIncomeExpense, IncomeLossFromEquityMethodInvestments),
				list(NonoperatingIncomeExpense, InterestAndDebtExpense),
				list(OperatingExpenses, AmortizationOfValueOfBusinessAcquiredVOBA),
				list(OperatingExpenses, AssetManagementCosts),
				list(OperatingExpenses, DeferredPolicyAcquisitionCostAmortizationExpense),
				list(OperatingExpenses, ExplorationExpenseMining),
				list(OperatingExpenses, FloorBrokerageExchangeAndClearanceFees),
				list(OperatingExpenses, GainLossOnSaleOfDerivatives),
				list(OperatingExpenses, GainLossOnSaleOfSecuritiesNet),
				list(OperatingExpenses, GainsLossesOnSalesOfAssets),
				list(OperatingExpenses, LiabilityForFuturePolicyBenefitsPeriodExpense),
				list(OperatingExpenses, OtherExpenses),
				list(OperatingExpenses, PolicyholderBenefitsAndClaimsIncurredNet),
				list(OperatingExpenses, RealEstateInsurance),
				list(OperatingExpenses, RealEstateTaxExpense),
				list(OperatingIncomeLoss, IncomeLossFromEquityMethodInvestments),
				list(OtherAssets, Assets),
				list(OtherAssetsCurrent, AssetsCurrent),
				list(OtherAssetsNoncurrent, AssetsNoncurrent),
				list(OtherLiabilities, Liabilities),
				list(OtherLiabilitiesCurrent, LiabilitiesCurrent),
				list(OtherLiabilitiesNoncurrent, LiabilitiesNoncurrent),
				list(ProfitLoss, GainsLossesOnSalesOfInvestmentRealEstate),
				list(PropertyPlantAndEquipmentNet, OilAndGasPropertyFullCostMethodNet),
				list(PropertyPlantAndEquipmentNet, OilAndGasPropertySuccessfulEffortMethodNet),
				list(PropertyPlantAndEquipmentOther, OilAndGasPropertyFullCostMethodNet),
				list(PropertyPlantAndEquipmentOther, OilAndGasPropertySuccessfulEffortMethodNet),
				list(PropertyPlantAndEquipmentOther, PropertyPlantAndEquipmentNet),
				list(RealEstateInvestments, EquityMethodInvestments),
				list(RealEstateRevenueNet, OperatingLeasesIncomeStatementLeaseRevenue),
				list(RealizedInvestmentGainsLosses, DebtAndEquitySecuritiesRealizedGainLoss),
				list(RealizedInvestmentGainsLosses, EquityMethodInvestmentRealizedGainLossOnDisposal),
				list(RealizedInvestmentGainsLosses, GainLossOnSaleOfSecuritiesNet),
				list(RealizedInvestmentGainsLosses, GainLossOnSecuritizationOfFinancialAssets),
				list(RealizedInvestmentGainsLosses, GainOnSaleOfInvestments),
				list(RestructuringSettlementAndImpairmentProvisions, DefinedBenefitPlanRecognizedNetGainLossDueToSettlements1),
				list(AccruedLiabilitiesCurrent, EmployeeRelatedLiabilitiesCurrent)
				)
				
constant $child_elements_promotable_to_sibling = set(
				list(DepreciationDepletionAndAmortization, AccretionAmortizationOfDiscountsAndPremiumsInvestments),
				list(DepreciationDepletionAndAmortization, AmortizationOfDebtDiscountPremium),
				list(DepreciationDepletionAndAmortization, AmortizationOfFinancingCosts),
				list(DepreciationDepletionAndAmortization, AmortizationOfFinancingCostsAndDiscounts),
				list(OperatingExpenses, GainLossOnDispositionOfAssets),
				list(OperatingExpenses, GainLossOnDispositionOfAssets1),
				list(OperatingExpenses, GainLossOnDispositionOfIntangibleAssets),
				list(OperatingExpenses, GainLossOnSaleOfBusiness),
				list(OperatingExpenses, GainLossOnSaleOfOilAndGasProperty),
				list(OperatingExpenses, GainLossOnSaleOfProperty),
				list(OperatingExpenses, GainLossOnSaleOfPropertyPlantEquipment),
				list(OperatingExpenses, GainLossRelatedToLitigationSettlement),
				list(OperatingExpenses, GainsLossesOnExtinguishmentOfDebt),
				list(OperatingExpenses, GainsLossesOnSalesOfAssets),
				list(OperatingExpenses, LitigationSettlementExpense),
				list(OperatingExpenses, RestructuringCharges),
				list(Revenues, InterestExpenseDebt)
				)	

constant $exclude_non_neg_members = set(
				CorporateNonSegmentMember,
				FairValueConcentrationOfRiskMarketRiskManagementEffectsOnIncomeOrNetAssetsMember,
				AccumulatedNetGainLossFromDesignatedOrQualifyingCashFlowHedgesMember,
				AccumulatedNetUnrealizedInvestmentGainLossMember,
				DeferredDerivativeGainLossMember,
				AboveMarketLeasesMember,
				NewAccountingPronouncementEarlyAdoptionEffectMember,
				UnallocatedFinancingReceivablesMember
				)

constant  $exclude_non_neg_axis_members = list(
				list(StatementBusinessSegmentsAxis, set(CorporateAndOtherMember, CorporateMember, AllOtherSegmentsMember)),
				list(dei:LegalEntityAxis, set(ParentCompanyMember, SubsidiariesMember, GuarantorSubsidiariesMember, NonGuarantorSubsidiariesMember, SubsidiaryIssuerMember)),
				list(ConsolidatedEntitiesAxis, set(ParentCompanyMember, SubsidiariesMember, GuarantorSubsidiariesMember, NonGuarantorSubsidiariesMember, SubsidiaryIssuerMember)),
				list(FairValueByMeasurementBasisAxis, set(ChangeDuringPeriodFairValueDisclosureMember))
				)

constant $exclude_non_neg_axis = set(StatementEquityComponentsAxis,
				ErrorCorrectionsAndPriorPeriodAdjustmentsRestatementByRestatementPeriodAndAmountAxis,
				AdjustmentsForChangeInAccountingPrincipleAxis,
				AdjustmentsForNewAccountingPronouncementsAxis,
				ProspectiveAdoptionOfNewAccountingPronouncementsAxis,
				QuantifyingMisstatementInCurrentYearFinancialStatementsByNatureOfErrorAxis,
				PartnerCapitalComponentsAxis,
				ChangeInAccountingEstimateByTypeAxis,
				PartnerTypeOfPartnersCapitalAccountAxis,
				StatementBusinessSegmentsAxis
				)

/** DQC.US.0001 **/

constant $member_USGAAP_fair_value = navigate dimensions dimension-member descendants from FairValueByFairValueHierarchyLevelAxis taxonomy $us-gaap returns set (target-name)