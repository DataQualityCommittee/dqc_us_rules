language: python
python:
  - "3.5"
branches:
  only:
  - master
  - /next.*/
  - /.*v5/
  - /v.*/
env:
  global:
    - EXPECTED=./tests/output
    - CURDIR=$(pwd)
  matrix:
    - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/1002517/000100251717000040/nuan-20170930.xml", "xule_run_only":"DQC.US.0009.47"},{"file":"http://www.sec.gov/Archives/edgar/data/1004411/000165495418007170/glla-20180331.xml", "xule_run_only":"DQC.US.0001.70"},{"file":"http://www.sec.gov/Archives/edgar/data/1011659/000162828018002667/ub-20171231.xml", "xule_run_only":"DQC.US.0069.7643"},{"file":"http://www.sec.gov/Archives/edgar/data/1014111/000101411118000002/imn-20171231.xml", "xule_run_only":"DQC.US.0055.7493"},{"file":"http://www.sec.gov/Archives/edgar/data/1014111/000101411118000002/imn-20171231.xml", "xule_run_only":"DQC.US.0011"}]' EXFILES=$EXPECTED/DQC.US.0009.47_nuan-2017.xml,$EXPECTED/DQC.US.0001.70_glla-2017.xml,$EXPECTED/DQC.US.0069.7643_ub-2017.xml,$EXPECTED/DQC.US.0055.7493_imn-2017.xml,$EXPECTED/DQC.US.0011_imn-2017.xml
    - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/1015383/000155335018000776/poww-20180331.xml", "xule_run_only":"DQC.US.0065.7502"},{"file":"http://www.sec.gov/Archives/edgar/data/1021635/000102163518000067/oge-20180517.xml", "xule_run_only":"DQC.US.0001.52"},{"file":"http://www.sec.gov/Archives/edgar/data/1024305/000102430517000071/coty-20170630.xml", "xule_run_only":"DQC.US.0009.41"},{"file":"http://www.sec.gov/Archives/edgar/data/1039101/000103910118000008/lll-20180330.xml", "xule_run_only":"DQC.US.0011"},{"file":"http://www.sec.gov/Archives/edgar/data/1040896/000149315218006806/idn-20180331.xml", "xule_run_only":"DQC.US.0001.69"}]' EXFILES=$EXPECTED/DQC.US.0065.7502_poww-2017.xml,$EXPECTED/DQC.US.0001.52_oge-2017.xml,$EXPECTED/DQC.US.0009.41_coty-2017.xml,$EXPECTED/DQC.US.0011_lll-2017.xml,$EXPECTED/DQC.US.0001.69_idn-2017.xml
install:
  - pip install -r requirements.txt
script:
  - travis_wait bash ./travis-run.sh
after_script:
  - echo '===== START LOG FILE =====' && cat log.xml && echo '===== END LOG FILE ====='
  - echo '===== START REPORT FILE =====' && cat report.txt && echo '===== END REPORT FILE ====='