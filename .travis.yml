language: python
dist: jammy
python: "3.12"
branches:
  only:
  - master
  - /v.*/
env:
  global:
    - EXPECTED=./tests/output
    - CURDIR=$(pwd)
    - PYTHON_VERSION=python3.12
    - XULE_VERSION=HF-save-reload-constants
    - XULE_REPO=hermfischer-wf
    - GH_SLUG=https://github.com/${TRAVIS_REPO_SLUG}
    - PR_BR=${TRAVIS_PULL_REQUEST_BRANCH:-$TRAVIS_BRANCH}

  matrix:
    #2 - v25 (2023)
    - INFILES='[{"file":"https://www.sec.gov/Archives/edgar/data/1474903/000147490324000034/bgsf-20240331.htm", "xule_run_only":"DQC.US.0192.10620"}]' EXFILES=$EXPECTED/DQC.US.0192.10620_BGSF_US-2023.xml
    #4 dqc_0015 and dqc_0080
    - INFILES='[{"file":"./tests/input/testfiles/2024/TestCo-2024-NonNeg-WithNew.xml", "xule_run_only":"DQC.US.0015"},{"file":"./tests/input/testfiles/2023/TestCo-2023-NonNeg-WithNew.xml", "xule_run_only":"DQC.US.0015"}]' EXFILES=$EXPECTED/DQC.US.0015_testco_us-2024.xml,$EXPECTED/DQC.US.0015_testco_us-2023.xml
    #5 - v24 (2024)
    - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/808326/000080832624000030/emkr-20240630.htm", "xule_run_only":"DQC.US.0185.10165"},{"file":"http://www.sec.gov/Archives/edgar/data/1565687/000095017024100587/inta-20240630.htm", "xule_run_only":"DQC.US.0185.10165"},{"file":"http://www.sec.gov/Archives/edgar/data/1839341/000162828024035714/core-20240630.htm", "xule_run_only":"DQC.US.0187.10175"},{"file":"http://www.sec.gov/Archives/edgar/data/1378789/000137878924000030/aer-20231231.htm", "xule_run_only":"DQC.US.0189.10184"},{"file":"http://www.sec.gov/Archives/edgar/data/1488917/000089710124000422/elmd240883_10k.htm", "xule_run_only":"DQC.US.0189.10184"},{"file":"http://www.sec.gov/Archives/edgar/data/1711929/000095017024097234/ck0001711929-20240630.htm", "xule_run_only":"DQC.US.0189.10184"}]' EXFILES=$EXPECTED/DQC.US.0185.10165_EMKR_US-2024.xml,$EXPECTED/DQC.US.0185.10165_INTA_US-2024.xml,$EXPECTED/DQC.US.0187.10175_CORE_US-2024.xml,$EXPECTED/DQC.US.0189.10184_AER_US-2024.xml,$EXPECTED/DQC.US.0189.10184_ELMD_US-2024.xml,$EXPECTED/DQC.US.0189.10184_CK_US-2024.xml
    #6 - v24 (2024 + 2023)
    - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/1603793/000149315224021582/form10-k.htm", "xule_run_only":"DQC.US.0170.10103"},{"file":"http://www.sec.gov/Archives/edgar/data/1133421/000113342124000052/noc-20240630.htm", "xule_run_only":"DQC.US.0170.10129"},{"file":"http://www.sec.gov/Archives/edgar/data/1476034/000155837024010721/mcb-20240630x10q.htm", "xule_run_only":"DQC.US.0170.10131"},{"file":"http://www.sec.gov/Archives/edgar/data/932781/000155278123000271/e23251_fcco-10q.htm", "xule_run_only":"DQC.US.0178.10134"},{"file":"http://www.sec.gov/Archives/edgar/data/1368637/000149315223017119/form10-q.htm", "xule_run_only":"DQC.US.0178.10135"},{"file":"http://www.sec.gov/Archives/edgar/data/1321834/000149315223017488/form10-q.htm", "xule_run_only":"DQC.US.0178.10137"},{"file":"http://www.sec.gov/Archives/edgar/data/1368637/000149315223017119/form10-q.htm", "xule_run_only":"DQC.US.0178.10138"},{"file":"http://www.sec.gov/Archives/edgar/data/931059/000149315223017256/form10-q.htm", "xule_run_only":"DQC.US.0178.10145"},{"file":"http://www.sec.gov/Archives/edgar/data/1321834/000149315223017488/form10-q.htm", "xule_run_only":"DQC.US.0178.10152"},{"file":"http://www.sec.gov/Archives/edgar/data/1162896/000149315223016842/form10-q.htm", "xule_run_only":"DQC.US.0178.10146"},{"file":"http://www.sec.gov/Archives/edgar/data/754811/000143774923015310/usglobal20230307_10ka.htm", "xule_run_only":"DQC.US.0179.10143"},{"file":"http://www.sec.gov/Archives/edgar/data/1141688/000149315223016606/form10-q.htm", "xule_run_only":"DQC.US.0179.10151"},{"file":"http://www.sec.gov/Archives/edgar/data/874396/000162828023017221/lcut-20230331.htm", "xule_run_only":"DQC.US.0179.10142"},{"file":"http://www.sec.gov/Archives/edgar/data/1832161/000149315223018593/form10-q.htm", "xule_run_only":"DQC.US.0182.10160"},{"file":"http://www.sec.gov/Archives/edgar/data/1300734/000149315223016645/form10-q.htm", "xule_run_only":"DQC.US.0182.10160"},{"file":"http://www.sec.gov/Archives/edgar/data/1144546/000168316823003596/hfactor_i10q-033123.htm", "xule_run_only":"DQC.US.0187.10174"},{"file":"http://www.sec.gov/Archives/edgar/data/1729944/000149315223018358/form10-q.htm", "xule_run_only":"DQC.US.0187.10174"},{"file":"http://www.sec.gov/Archives/edgar/data/723603/000095017024083115/culp-20240428.htm", "xule_run_only":"DQC.US.0193.10153"},{"file":"http://www.sec.gov/Archives/edgar/data/1123596/000143774924022597/babs20240531_10q.htm", "xule_run_only":"DQC.US.0193.10153"},{"file":"http://www.sec.gov/Archives/edgar/data/27904/000002790424000009/dal-20240630.htm", "xule_run_only":"DQC.US.0193.10153"}]' EXFILES=$EXPECTED/DQC.US.0170.10103_NRIS_US-2024.xml,$EXPECTED/DQC.US.0170.10129_NOC_US-2024.xml,$EXPECTED/DQC.US.0170.10131_MCB_US-2024.xml,$EXPECTED/DQC.US.0178.10134_FCCO_US-2023.xml,$EXPECTED/DQC.US.0178.10135_PETR_US-2023.xml,$EXPECTED/DQC.US.0178.10137_MYMD_US-2023.xml,$EXPECTED/DQC.US.0178.10138_PETR_US-2023.xml,$EXPECTED/DQC.US.0178.10145_RENN_US-2023.xml,$EXPECTED/DQC.US.0178.10152_MYMD_US-2023.xml,$EXPECTED/DQC.US.0178.10146_PROP_US-2023.xml,$EXPECTED/DQC.US.0179.10143_USG_US-2023.xml,$EXPECTED/DQC.US.0179.10151_LARK_US-2023.xml,$EXPECTED/DQC.US.0179.10142_LCUT_US-2023.xml,$EXPECTED/DQC.US.0182.10160_KEYR_US-2023.xml,$EXPECTED/DQC.US.0182.10160_SISI_US-2023.xml,$EXPECTED/DQC.US.0187.10174_HWTR_US-2023.xml,$EXPECTED/DQC.US.0187.10174_IMAC_US-2023.xml,$EXPECTED/DQC.US.0193.10153_CULP_US-2024.xml,$EXPECTED/DQC.US.0193.10153_BABS_US-2024.xml,$EXPECTED/DQC.US.0193.10153_DAL_US-2024.xml
    #7 - v23 (2023 + 2022)
    - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/1853047/000101376223003948/f10q0623_hudsonacq1.htm", "xule_run_only":"DQC.US.0167.10099"},{"file":"http://www.sec.gov/Archives/edgar/data/1098009/000118518523001064/amgreat20230630_10k.htm", "xule_run_only":"DQC.US.0167.10099"},{"file":"http://www.sec.gov/Archives/edgar/data/1896511/000101376223004045/f20f2022_zkgcnew.htm", "xule_run_only":"DQC.US.0167.10100"},{"file":"http://www.sec.gov/Archives/edgar/data/1853047/000101376223003948/f10q0623_hudsonacq1.htm", "xule_run_only":"DQC.US.0167.10100"},{"file":"http://www.sec.gov/Archives/edgar/data/1931055/000166357723000505/mdnc10q_083123.htm", "xule_run_only":"DQC.US.0167.10101"},{"file":"http://www.sec.gov/Archives/edgar/data/1286681/000095017023052997/dpz-20230910.htm", "xule_run_only":"DQC.US.0167.10101"},{"file":"http://www.sec.gov/Archives/edgar/data/788920/000107997323001429/pdex_10k-063023.htm", "xule_run_only":"DQC.US.0168.10096"},{"file":"http://www.sec.gov/Archives/edgar/data/924095/000149315223037175/form10-k.htm", "xule_run_only":"DQC.US.0168.10096"},{"file":"http://www.sec.gov/Archives/edgar/data/1865127/000101376223003864/f10k2023_lucyscientific.htm", "xule_run_only":"DQC.US.0168.10097"},{"file":"http://www.sec.gov/Archives/edgar/data/788920/000107997323001429/pdex_10k-063023.htm", "xule_run_only":"DQC.US.0168.10097"},{"file":"http://www.sec.gov/Archives/edgar/data/1379006/000141057823002146/nnvc-20230630x10k.htm", "xule_run_only":"DQC.US.0168.10098"},{"file":"http://www.sec.gov/Archives/edgar/data/1593001/000101376223003824/f10k2023_nightfood.htm", "xule_run_only":"DQC.US.0168.10098"},{"file":"http://www.sec.gov/Archives/edgar/data/924805/000092480523000104/frhc-20230630.htm", "xule_run_only":"DQC.US.0169.10102"},{"file":"http://www.sec.gov/Archives/edgar/data/1823575/000095017023047751/zfox-20230731.htm", "xule_run_only":"DQC.US.0169.10102"}]' EXFILES=$EXPECTED/DQC.US.0167.10099_HUDA_US-2023.xml,$EXPECTED/DQC.US.0167.10099_AAGH_US-2023.xml,$EXPECTED/DQC.US.0167.10100_ZKGC_US-2023.xml,$EXPECTED/DQC.US.0167.10100_HUDA_US-2023.xml,$EXPECTED/DQC.US.0167.10101_MDNC_US-2023.xml,$EXPECTED/DQC.US.0167.10101_DPZ_US-2023.xml,$EXPECTED/DQC.US.0168.10096_PDEX_US-2023.xml,$EXPECTED/DQC.US.0168.10096_MVCO_US-2023.xml,$EXPECTED/DQC.US.0168.10097_LSDI_US-2023.xml,$EXPECTED/DQC.US.0168.10097_PDEX_US-2023.xml,$EXPECTED/DQC.US.0168.10098_NNVC_US-2023.xml,$EXPECTED/DQC.US.0168.10098_NGTF_US-2023.xml,$EXPECTED/DQC.US.0169.10102_FRHC_US-2023.xml,$EXPECTED/DQC.US.0169.10102_ZFOX_US-2023.xml
    #8 v22 (2023 + 2022)
    - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/1546652/000121390023046769/f10q0423_vaneckmerk.htm", "xule_run_only":"DQC.US.0159.10081"},{"file":"http://www.sec.gov/Archives/edgar/data/704562/000168316823004329/avid_i10k-043023.htm", "xule_run_only":"DQC.US.0161.10083"},{"file":"http://www.sec.gov/Archives/edgar/data/1690080/000121390023049728/ea179836-s1_180lifesci.htm", "xule_run_only":"DQC.US.0161.10083"},{"file":"http://www.sec.gov/Archives/edgar/data/1015383/000149315223021280/form10-k.htm", "xule_run_only":"DQC.US.0163.10085"},{"file":"http://www.sec.gov/Archives/edgar/data/107687/000010768723000015/wgo-20230527.htm", "xule_run_only":"DQC.US.0163.10085"},{"file":"http://www.sec.gov/Archives/edgar/data/78239/000007823923000091/pvh-20230430.htm", "xule_run_only":"DQC.US.0164.10087"},{"file":"https://www.sec.gov/Archives/edgar/data/1652044/000165204423000070/goog-20230630.htm", "xule_run_only":"DQC.US.0174.10115"}]' EXFILES=$EXPECTED/DQC.US.0159.10081_VMRK_us-2023.xml,$EXPECTED/DQC.US.0161.10083_CDMO_us-2023.xml,$EXPECTED/DQC.US.0161.10083_ATNF_us-2023.xml,$EXPECTED/DQC.US.0163.10085_POWW_us-2023.xml,$EXPECTED/DQC.US.0163.10085_WGO_us-2023.xml,$EXPECTED/DQC.US.0164.10087_PVH_us-2023.xml,$EXPECTED/DQC.US.0174.10115_goog-us-2023.xml
    #10 v22 (2023 + 2022) 
    - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/7789/000000778923000035/asb-20230331.htm", "xule_run_only":"DQC.US.0001.51"},{"file":"http://www.sec.gov/Archives/edgar/data/55785/000005578523000029/kmb-20230331.htm", "xule_run_only":"DQC.US.0001.76"},{"file":"http://www.sec.gov/Archives/edgar/data/1338065/000133806523000016/dpm-20230331.htm", "xule_run_only":"DQC.US.0001.81"},{"file":"http://www.sec.gov/Archives/edgar/data/1393781/000166357723000264/qind10q_033123.htm", "xule_run_only":"DQC.US.0004.16"},{"file":"http://www.sec.gov/Archives/edgar/data/1561880/000149315223023943/form10-q.htm", "xule_run_only":"DQC.US.0004.9282"},{"file":"http://www.sec.gov/Archives/edgar/data/1661039/000165495423008776/tptw_10q.htm", "xule_run_only":"DQC.US.0004.9282"},{"file":"http://www.sec.gov/Archives/edgar/data/1230524/000190359623000519/f10q_cyberapps.htm", "xule_run_only":"DQC.US.0009.15"},{"file":"http://www.sec.gov/Archives/edgar/data/1539680/000106299323013910/form10q.htm", "xule_run_only":"DQC.US.0009.24"}]' EXFILES=$EXPECTED/DQC.US.0001.51_ASBA_us-2023.xml,$EXPECTED/DQC.US.0001.76_KMB_us-2023.xml,$EXPECTED/DQC.US.0001.81_DCPPRC_us-2023.xml,$EXPECTED/DQC.US.0004.16_QIND_us-2023.xml,$EXPECTED/DQC.US.0004.9282_LEAI_us-2023.xml,$EXPECTED/DQC.US.0004.9282_TPTW_us-2023.xml,$EXPECTED/DQC.US.0009.15_CETC_us-2023.xml,$EXPECTED/DQC.US.0009.24_HMMR_us-2023.xml
    #11 v22 (2023 + 2022)
    - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/1440799/000147793223005360/mmex_10k.htm", "xule_run_only":"DQC.US.0081.9278"},{"file":"http://www.sec.gov/Archives/edgar/data/1190370/000173112223001281/e4854_10q.htm", "xule_run_only":"DQC.US.0081.9277"},{"file":"http://www.sec.gov/Archives/edgar/data/1642365/000182912623004564/alpineautobro_s1.htm", "xule_run_only":"DQC.US.0081.9277"},{"file":"http://www.sec.gov/Archives/edgar/data/1846809/000175392623000904/g083559_s4.htm", "xule_run_only":"DQC.US.0081.9277"},{"file":"http://www.sec.gov/Archives/edgar/data/1694617/000118518523000564/royaleinc20221231_10k.htm", "xule_run_only":"DQC.US.0087.9369"},{"file":"http://www.sec.gov/Archives/edgar/data/1326205/000118518523000693/igcpharma20230331_10k.htm", "xule_run_only":"DQC.US.0087.9370"},{"file":"http://www.sec.gov/Archives/edgar/data/31667/000118518523000539/edc20230228_10k.htm", "xule_run_only":"DQC.US.0087.9369"},{"file":"http://www.sec.gov/Archives/edgar/data/1170010/000117001023000065/kmx-20230531.htm", "xule_run_only":"DQC.US.0094.9527"},{"file":"http://www.sec.gov/Archives/edgar/data/1931055/000166357723000285/mdnc10k_022823.htm", "xule_run_only":"DQC.US.0095.9528"},{"file":"http://www.sec.gov/Archives/edgar/data/6845/000000684523000006/apog-20230225.htm", "xule_run_only":"DQC.US.0098.9531"},{"file":"http://www.sec.gov/Archives/edgar/data/1901886/000182912623004746/aurafatprojects_10q.htm", "xule_run_only":"DQC.US.0099.9533"},{"file":"http://www.sec.gov/Archives/edgar/data/802257/000118518523000727/mitesco20221231_10k.htm", "xule_run_only":"DQC.US.0117.9574"},{"file":"http://www.sec.gov/Archives/edgar/data/1539850/000149315223018647/form10-q.htm", "xule_run_only":"DQC.US.0158.10078"},{"file":"http://www.sec.gov/Archives/edgar/data/1435812/000151597123000063/arem10q033123.htm", "xule_run_only":"DQC.US.0155.10072"},{"file":"http://www.sec.gov/Archives/edgar/data/6845/000000684523000006/apog-20230225.htm", "xule_run_only":"DQC.US.0155.10072"}]' EXFILES=$EXPECTED/DQC.US.0081.9278_MMEX_us-2023.xml,$EXPECTED/DQC.US.0081.9277_IVDN_us-2023.xml,$EXPECTED/DQC.US.0081.9277_ALTB_us-2023.xml,$EXPECTED/DQC.US.0081.9277_TMB_us-2023.xml,$EXPECTED/DQC.US.0087.9369_ROYL_us-2023.xml,$EXPECTED/DQC.US.0087.9370_CETC_us-2023.xml,$EXPECTED/DQC.US.0087.9369_EDUC_us-2023.xml,$EXPECTED/DQC.US.0094.9527_KMX_us-2023.xml,$EXPECTED/DQC.US.0095.9528_MNDC_us-2023.xml,$EXPECTED/DQC.US.0098.9531_APOG_us-2023.xml,$EXPECTED/DQC.US.0099.9533_AFARU_us-2023.xml,$EXPECTED/DQC.US.0117.9574_MITI_us-2023.xml,$EXPECTED/DQC.US.0158.10078_star-us-2023.xml,$EXPECTED/DQC.US.0155.10072_arem-us-2023.xml,$EXPECTED/DQC.US.0155.10072_apog-us-2023.xml   
install:
  - pip install -r requirements.txt
  - pip install Arelle-release==2.36.4
script:
  - travis_wait bash ./travis-run.sh
after_script:
  - echo '===== START LOG FILE =====' && head -3000 log.xml && echo '===== END LOG FILE ====='
  - echo '===== START REPORT FILE =====' && head -3000 report.txt && echo '===== END REPORT FILE ====='
  - echo '===== START REPORT HTML FILE =====' && head -3000 report.html && echo '===== END REPORT HTML FILE ====='
