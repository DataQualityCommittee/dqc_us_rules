language: python
python:
  - "3.5"
branches:
  only:
  - master
  - /next.*/
  - /.*v5/
  - /v.*/
env:
  global:
    - EXPECTED=./tests/output
    - CURDIR=$(pwd)
  matrix:
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/1616318/000161631818000051/vsto-20180331.xml", "xule_run_only":"DQC.US.0013"}]' EXFILES=$EXPECTED/DQC.US.0013_vsto-2017.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/1678022/000121390018005207/newa-20171231.xml", "xule_run_only":"DQC.US.0013"}]' EXFILES=$EXPECTED/DQC.US.0013_newa-2017.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/18255/000001825518000024/cato-20180203.xml", "xule_run_only":"DQC.US.0013"}]' EXFILES=$EXPECTED/DQC.US.0013_cato-2017.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/35214/000156276218000046/foe-20171231.xml", "xule_run_only":"DQC.US.0013"}]' EXFILES=$EXPECTED/DQC.US.0013_foe-2017.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/4969/000000496918000015/aexc-20171231.xml", "xule_run_only":"DQC.US.0013"}]' EXFILES=$EXPECTED/DQC.US.0013_aexc-2017.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/50725/000005072517000060/gff-20170930.xml", "xule_run_only":"DQC.US.0013"}]' EXFILES=$EXPECTED/DQC.US.0013_gff-2017.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/712515/000071251518000024/ea-20180331.xml", "xule_run_only":"DQC.US.0013"}]' EXFILES=$EXPECTED/DQC.US.0013_ea-2017.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/74145/000007414518000015/oge-20180517.xml", "xule_run_only":"DQC.US.0013"}]' EXFILES=$EXPECTED/DQC.US.0013_oge-2017.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/79879/000007987918000039/ppg-20171231.xml", "xule_run_only":"DQC.US.0013"}]' EXFILES=$EXPECTED/DQC.US.0013_ppg-2017.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/944480/000094448018000007/gvp-20171231.xml", "xule_run_only":"DQC.US.0013"}]' EXFILES=$EXPECTED/DQC.US.0013_gvp-2017.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/1597846/000149315217013111/grnq-20170930.xml", "xule_run_only":"DQC.US.0014"}]' EXFILES=$EXPECTED/DQC.US.0014_grnq-2017.xml
        - INFILES='[{"file":"./tests/input/Testco-2018-NonNeg.xbrl", "xule_run_only":"DQC.US.0015"}]' EXFILES=$EXPECTED/DQC.US.0015_testco-2018.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/1098880/000106299318002078/igxt-20180331.xml", "xule_run_only":"DQC.US.0018.34"}]' EXFILES=$EXPECTED/DQC.US.0018.34_igxt-2017.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/1650575/000121390018008637/brqs-20180331.xml", "xule_run_only":"DQC.US.0033.2"}]' EXFILES=$EXPECTED/DQC.US.0033.2_brqs-2017.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/1487952/000148795218000016/vpg-20180331.xml", "xule_run_only":"DQC.US.0036.1"}]' EXFILES=$EXPECTED/DQC.US.0036.1_vpg-2017.xml
        - INFILES='[{"file":"https://www.sec.gov/Archives/edgar/data/1263872/000106299318001585/takd-20171231.xml", "xule_run_only":"DQC.US.0041.73"}]' EXFILES=$EXPECTED/DQC.US.0041.73_takd-2017.xml
        - INFILES='[{"file":"https://www.sec.gov/Archives/edgar/data/1094084/000168316818000840/tkoi-20171231.xml", "xule_run_only":"DQC.US.0043.7488"}]' EXFILES=$EXPECTED/DQC.US.0043.7488_tkoi-2017.xml
        - INFILES='[{"file":"https://www.sec.gov/Archives/edgar/data/1302028/000156459018007546/mntx-20170630.xml", "xule_run_only":"DQC.US.0043.7488"}]' EXFILES=$EXPECTED/DQC.US.0043.7488_mntx-2017.xml
        - INFILES='[{"file":"https://www.sec.gov/Archives/edgar/data/1507605/000149315218005254/mara-20171231.xml", "xule_run_only":"DQC.US.0044.7503"}]' EXFILES=$EXPECTED/DQC.US.0044.7503_mara-2017.xml
        - INFILES='[{"file":"https://www.sec.gov/Archives/edgar/data/1589361/000144586618000390/mntm-20171231.xml", "xule_run_only":"DQC.US.0045.6838"}]' EXFILES=$EXPECTED/DQC.US.0045.6838_mntm-2017.xml
        - INFILES='[{"file":"https://www.sec.gov/Archives/edgar/data/1487843/000121390018004879/yriv-20171231.xml", "xule_run_only":"DQC.US.0046.6842"}]' EXFILES=$EXPECTED/DQC.US.0046.6842_yriv-2017.xml
        - INFILES='[{"file":"https://www.sec.gov/Archives/edgar/data/1703141/000119312518128984/desp-20171231.xml", "xule_run_only":"DQC.US.0047.7481"}]' EXFILES=$EXPECTED/DQC.US.0047.7481_desp-2017.xml
        - INFILES='[{"file":"https://www.sec.gov/Archives/edgar/data/1014473/000101447318000028/vrsn-20180331.xml", "xule_run_only":"DQC.US.0048.7482"}]' EXFILES=$EXPECTED/DQC.US.0048.7482_vrsn-2017.xml
        - INFILES='[{"file":"https://www.sec.gov/Archives/edgar/data/924095/000149315218005838/wscc-20170930.xml", "xule_run_only":"DQC.US.0049.7483"}]' EXFILES=$EXPECTED/DQC.US.0049.7483_wscc-2018.xml
        - INFILES='[{"file":"https://www.sec.gov/Archives/edgar/data/1504461/000150446118000024/ngl-20180331.xml", "xule_run_only":"DQC.US.0051.7484"}]' EXFILES=$EXPECTED/DQC.US.0051.7484_ngl-2017.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/1168990/000119312518164214/ck0001168990-20180331.xml", "xule_run_only":"DQC.US.0051.7485"}]' EXFILES=$EXPECTED/DQC.US.0051.7485_ck0001168990-20180331-2017.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/1112985/000121390018006544/dltz-20171231.xml", "xule_run_only":"DQC.US.0051.7486"}]' EXFILES=$EXPECTED/DQC.US.0051.7486_dltz-2017.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/91419/000009141918000005/sjm-20180430.xml", "xule_run_only":"DQC.US.0052.7487"}]' EXFILES=$EXPECTED/DQC.US.0052.7487_sjm-2017.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/13239/000001323918000007/msc-20171231.xml", "xule_run_only":"DQC.US.0053.7489"}]' EXFILES=$EXPECTED/DQC.US.0053.7489_msc-2017.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/904979/000090497918000035/shlo-20180430.xml", "xule_run_only":"DQC.US.0054.7490"}]' EXFILES=$EXPECTED/DQC.US.0054.7490_shlo-2017.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/1398659/000095012318006130/g-20171231.xml", "xule_run_only":"DQC.US.0054.7491"}]' EXFILES=$EXPECTED/DQC.US.0054.7491_g-2017.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/1014111/000101411118000002/imn-20171231.xml", "xule_run_only":"DQC.US.0055.7493"}]' EXFILES=$EXPECTED/DQC.US.0055.7493_imn-2017.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/757011/000075701118000040/usg-20180331.xml", "xule_run_only":"DQC.US.0055.7493"}]' EXFILES=$EXPECTED/DQC.US.0055.7493_usg-2017.xml
        - INFILES='[{"file":"https://www.sec.gov/Archives/edgar/data/1011452/000101145218000009/none-20180331.xml", "xule_run_only":"DQC.US.0057.7494"}]' EXFILES=$EXPECTED/DQC.US.0057.7494_none-2017.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/741815/000074181518000027/hh-20170630.xml", "xule_run_only":"DQC.US.0060.7497"}]' EXFILES=$EXPECTED/DQC.US.0060.7497_hh-2017.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/906553/000090655318000036/byd-20180628.xml", "xule_run_only":"DQC.US.0061.7498"}]' EXFILES=$EXPECTED/DQC.US.0061.7498_byd-2017.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/906553/000090655318000036/byd-20180628.xml", "xule_run_only":"DQC.US.0061.7499"}]' EXFILES=$EXPECTED/DQC.US.0061.7499_byd-2017.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/906553/000090655318000036/byd-20180628.xml", "xule_run_only":"DQC.US.0061.7500"}]' EXFILES=$EXPECTED/DQC.US.0061.7500_byd-2017.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/1735664/000149315218009668/jmil-20171231.xml", "xule_run_only":"DQC.US.0062.7501"}]' EXFILES=$EXPECTED/DQC.US.0062.7501_jmil-2017.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/1015383/000155335018000776/poww-20180331.xml", "xule_run_only":"DQC.US.0065.7502"}]' EXFILES=$EXPECTED/DQC.US.0065.7502_poww-2017.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/37996/000003799618000015/f-20171231.xml", "xule_run_only":"DQC.US.0067.7644"}]' EXFILES=$EXPECTED/DQC.US.0067.7644_f-2017.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/26058/000002605818000020/cts-20171231.xml", "xule_run_only":"DQC.US.0068.7641"}]' EXFILES=$EXPECTED/DQC.US.0068.7641_cts-2017.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/1011659/000162828018002667/ub-20171231.xml", "xule_run_only":"DQC.US.0069.7643"}]' EXFILES=$EXPECTED/DQC.US.0069.7643_ub-2017.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/26058/000002605818000020/cts-20171231.xml", "xule_run_only":"DQC.US.0070.7645"}]' EXFILES=$EXPECTED/DQC.US.0070.7645_cts-2017.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/70858/000007085818000009/bac-20171231.xml", "xule_run_only":"DQC.US.0070.7645"}]' EXFILES=$EXPECTED/DQC.US.0070.7645_bac-2017.xml
        - INFILES='[{"file":"https://www.sec.gov/Archives/edgar/data/51143/000104746918001117/ibm-20171231.xml", "xule_run_only":"DQC.US.0070.7645"}]' EXFILES=$EXPECTED/DQC.US.0070.7645_ibm-2017.xml
        - INFILES='[{"file":"https://www.sec.gov/Archives/edgar/data/52988/000156459017024192/jec-20170929.xml", "xule_run_only":"DQC.US.0070.7645"}]' EXFILES=$EXPECTED/DQC.US.0070.7645_jec-2017.xml
        - INFILES='[{"file":"https://www.sec.gov/Archives/edgar/data/66740/000155837018000535/mmm-20171231.xml", "xule_run_only":"DQC.US.0070.7645"}]' EXFILES=$EXPECTED/DQC.US.0070.7645_mmm-2017.xml
        - INFILES='[{"file":"https://www.sec.gov/Archives/edgar/data/844143/000155837018004825/dfbg-20180331.xml", "xule_run_only":"DQC.US.0071.7646"}]' EXFILES=$EXPECTED/DQC.US.0071.7646_dfbg-2017.xml
        - INFILES='[{"file":"https://www.sec.gov/Archives/edgar/data/730464/000114420418025084/atge-20180331.xml", "xule_run_only":"DQC.US.0073.7648"}]' EXFILES=$EXPECTED/DQC.US.0073.7648_atge-2017.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/1336047/000133604718000042/bwp2018q110q33118.htm", "xule_run_only":"DQC.US.0074.7649"}]' EXFILES=$EXPECTED/DQC.US.0074.7649_bwp-2017.xml
        - INFILES='[{"file":"http://www.sec.gov/Archives/edgar/data/37996/000003799618000015/f-20171231.xml", "xule_run_only":"DQC.US.0074.7649"}]' EXFILES=$EXPECTED/DQC.US.0074.7649_f-2017.xml
        - INFILES='[{"file":"https://www.sec.gov/Archives/edgar/data/1105533/000117184318003973/args-20180331.xml", "xule_run_only":"DQC.US.0076.7653"}]' EXFILES=$EXPECTED/DQC.US.0076.7653_args-2018.xml
        - INFILES='[{"file":"https://www.sec.gov/Archives/edgar/data/8063/000000806318000010/atro-20180331.xml", "xule_run_only":"DQC.US.0076.7653"}]' EXFILES=$EXPECTED/DQC.US.0076.7653_atro-2017.xml
        - INFILES='[{"file":"https://www.sec.gov/Archives/edgar/data/1459417/000110465918030256/twou-20180331.xml", "xule_run_only":"DQC.US.0077.7654"}]' EXFILES=$EXPECTED/DQC.US.0077.7654_twou-2017.xml
        - INFILES='[{"file":"https://www.sec.gov/Archives/edgar/data/1347858/000114420418025088/xxii-20180331.xml", "xule_run_only":"DQC.US.0078.7655"}]' EXFILES=$EXPECTED/DQC.US.0078.7655_xxii-2017.xml
install:
  - pip install -r requirements.txt
script:
  - travis_wait bash ./travis-run.sh
after_script:
  - echo '===== START LOG FILE =====' && head -3000 log.xml && echo '===== END LOG FILE ====='
  - echo '===== START REPORT FILE =====' && head -3000 report.txt && echo '===== END REPORT FILE ====='
  - echo '===== START REPORT HTML FILE =====' && head -3000 report.html && echo '===== END REPORT HTML FILE ====='